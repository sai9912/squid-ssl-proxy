# Author: Satish Gaikwad <satish@satishweb.com>
# Please declare DOLLAR variable to dollar sign before running envsubst command on this file
version: "3.4"
networks:
  proxy:

services:
  squid:
    image: satishweb/squid-ssl-proxy:latest
    networks:
      - proxy
    environment:
      - CERT_CN=squid.local
      - CERT_ORG=squid
      - CERT_OU=squid
      - CERT_COUNTRY=US
      - SQUID_PROXY_PORT=8000
      - SQUID_PROXY_SSLBUMP_PORT=3128
    ports:
      - "8000:8000"
      - "3128:3128"
        #dns:
        #- 192.168.0.1
    volumes:
      - ./data/log:/var/log/
      - ./data/cache:/var/cache
      - ./data/cert:/etc/squid-cert
      - ./squid.conf:/templates/squid.sample.conf
      # - ./scripts/entrypoint.sh /entrypoint
    restart: always
